<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{common/header :: header}"></head>
<head>
    <title>검색 결과</title>
    <link rel="stylesheet" href="/layout/css/custom-searchresult-style.css" />
</head>
<body class="body">
<div th:replace="~{common/sidebar :: sidenav}"></div>

<div class="main-content">
    <!-- 검색 창 -->
    <div th:replace="~{common/search :: searchForm}"></div>

    <h5 class="title">검색결과</h5>
    <div class="section">
        <!-- 필터 버튼 그룹 -->
        <div class="filter-btn-group">
            <button class="filter-btn active" onclick="applyFilter('ALL')">전체</button>
            <button class="filter-btn" onclick="applyFilter('KOSPI')">코스피</button>
            <button class="filter-btn" onclick="applyFilter('KOSDAQ')">코스닥</button>
        </div>

        <!-- 검색 결과 테이블 -->
        <table class="results-table">
            <thead>
            <tr>
                <th>종목명</th>
                <th>현재가</th>
                <th>등락률</th>
                <th>시가총액</th>
                <th>거래량/거래대금</th>
            </tr>
            </thead>
            <tbody id="results-tbody">
            <!-- 검색 결과가 여기에 동적으로 추가됩니다 -->
            </tbody>
        </table>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const keywordElement = document.getElementById("hidden-keyword");

        // 검색 결과 페이지인 경우, 초기 검색 결과를 가져옴
        if (keywordElement) {
            const keyword = keywordElement.value.trim();

            // 검색어가 있을 경우에만 초기 검색 결과를 표시
            if (keyword !== '') {
                const currentFilter = 'ALL'; // 기본 필터 설정
                searchStocks(keyword, currentFilter);
            }
        }
    });
</script>

<!-- 스크립트는 body 끝 부분에 배치 -->
<script th:replace="~{common/sidebar :: sidenav-script}"></script>

<script th:replace="~{common/search :: search-script}"></script>
</body>
</html>